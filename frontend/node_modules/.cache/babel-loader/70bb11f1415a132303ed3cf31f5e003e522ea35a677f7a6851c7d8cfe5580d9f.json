{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\major_projec(sem-7)\\\\frontend\\\\src\\\\components\\\\Chatwindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatWindow() {\n  _s();\n  const [q, setQ] = useState(\"\");\n  const [msgs, setMsgs] = useState([]);\n  const token = localStorage.getItem(\"token\");\n  const send = async () => {\n    if (!q) return;\n    setMsgs(prev => [...prev, {\n      from: \"you\",\n      text: q\n    }]);\n    try {\n      const res = await axios.post(\"http://localhost:8000/chat/sessions/demo/messages\", {\n        text: q\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setMsgs(prev => [...prev, {\n        from: \"assistant\",\n        text: res.data.answer,\n        sources: res.data.source_docs\n      }]);\n    } catch (e) {\n      setMsgs(prev => {\n        var _e$response, _e$response$data;\n        return [...prev, {\n          from: \"assistant\",\n          text: \"Error: \" + (((_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || e.message)\n        }];\n      });\n    }\n    setQ(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"msg-list\",\n      id: \"msgList\",\n      children: [msgs.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: \"#8b98a9\",\n          padding: 12\n        },\n        children: \"Ask a question about HR, IT or Finance...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 31\n      }, this), msgs.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"msg-row \" + (m.from === \"you\" ? \"you\" : \"assistant\"),\n        children: [m.from === \"you\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-avatar\",\n          children: \"Y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-bubble \" + (m.from === \"you\" ? \"you\" : \"assistant\"),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: m.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 15\n          }, this), m.sources && m.sources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"msg-sources\",\n            children: [\"Sources:\", m.sources.map((s, idx) => /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              onClick: e => e.preventDefault(),\n              children: s.doc_id\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 45\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 13\n        }, this), m.from === \"assistant\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"msg-avatar\",\n          style: {\n            background: \"#08345c\",\n            color: \"#fff\"\n          },\n          children: \"A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 38\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: q,\n        onChange: e => setQ(e.target.value),\n        placeholder: \"Type a message...\",\n        onKeyDown: e => e.key === 'Enter' && send()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: send,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatWindow, \"+ap3kBqqb9yKQ4kkak4q7ZTsYHw=\");\n_c = ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","ChatWindow","_s","q","setQ","msgs","setMsgs","token","localStorage","getItem","send","prev","from","text","res","post","headers","Authorization","data","answer","sources","source_docs","e","_e$response","_e$response$data","response","detail","message","children","className","id","length","style","color","padding","fileName","_jsxFileName","lineNumber","columnNumber","map","m","i","s","idx","href","onClick","preventDefault","doc_id","background","type","value","onChange","target","placeholder","onKeyDown","key","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Desktop/major_projec(sem-7)/frontend/src/components/Chatwindow.jsx"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ChatWindow(){\r\n  const [q, setQ] = useState(\"\");\r\n  const [msgs, setMsgs] = useState([]);\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  const send = async () => {\r\n    if(!q) return;\r\n    setMsgs(prev=> [...prev, {from:\"you\", text:q}]);\r\n    try{\r\n      const res = await axios.post(\"http://localhost:8000/chat/sessions/demo/messages\", { text: q }, { headers: { Authorization: `Bearer ${token}` }});\r\n      setMsgs(prev=> [...prev, {from:\"assistant\", text: res.data.answer, sources: res.data.source_docs}]);\r\n    }catch(e){\r\n      setMsgs(prev=> [...prev, {from:\"assistant\", text: \"Error: \" + (e.response?.data?.detail || e.message)}]);\r\n    }\r\n    setQ(\"\");\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"msg-list\" id=\"msgList\">\r\n        {msgs.length === 0 && <div style={{color:\"#8b98a9\", padding:12}}>Ask a question about HR, IT or Finance...</div>}\r\n        {msgs.map((m,i)=>(\r\n          <div key={i} className={\"msg-row \" + (m.from===\"you\" ? \"you\":\"assistant\")}>\r\n            {m.from===\"you\" && <div className=\"msg-avatar\">Y</div>}\r\n            <div className={\"msg-bubble \" + (m.from===\"you\" ? \"you\":\"assistant\")}>\r\n              <div>{m.text}</div>\r\n              {m.sources && m.sources.length>0 && (\r\n                <div className=\"msg-sources\">\r\n                  Sources:\r\n                  {m.sources.map((s, idx)=> <a key={idx} href=\"#\" onClick={e=>e.preventDefault()}>{s.doc_id}</a>)}\r\n                </div>\r\n              )}\r\n            </div>\r\n            {m.from===\"assistant\" && <div className=\"msg-avatar\" style={{background:\"#08345c\", color:\"#fff\"}}>A</div>}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"chat-input\">\r\n        <input type=\"text\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Type a message...\" onKeyDown={(e)=> e.key === 'Enter' && send()} />\r\n        <button onClick={send}>Send</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,QAAO,OAAO;AACrC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,UAAUA,CAAA,EAAE;EAAAC,EAAA;EAClC,MAAM,CAACC,CAAC,EAAEC,IAAI,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC9B,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAMU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,MAAMC,IAAI,GAAG,MAAAA,CAAA,KAAY;IACvB,IAAG,CAACP,CAAC,EAAE;IACPG,OAAO,CAACK,IAAI,IAAG,CAAC,GAAGA,IAAI,EAAE;MAACC,IAAI,EAAC,KAAK;MAAEC,IAAI,EAACV;IAAC,CAAC,CAAC,CAAC;IAC/C,IAAG;MACD,MAAMW,GAAG,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAAC,mDAAmD,EAAE;QAAEF,IAAI,EAAEV;MAAE,CAAC,EAAE;QAAEa,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUV,KAAK;QAAG;MAAC,CAAC,CAAC;MAChJD,OAAO,CAACK,IAAI,IAAG,CAAC,GAAGA,IAAI,EAAE;QAACC,IAAI,EAAC,WAAW;QAAEC,IAAI,EAAEC,GAAG,CAACI,IAAI,CAACC,MAAM;QAAEC,OAAO,EAAEN,GAAG,CAACI,IAAI,CAACG;MAAW,CAAC,CAAC,CAAC;IACrG,CAAC,QAAMC,CAAC,EAAC;MACPhB,OAAO,CAACK,IAAI;QAAA,IAAAY,WAAA,EAAAC,gBAAA;QAAA,OAAG,CAAC,GAAGb,IAAI,EAAE;UAACC,IAAI,EAAC,WAAW;UAAEC,IAAI,EAAE,SAAS,IAAI,EAAAU,WAAA,GAAAD,CAAC,CAACG,QAAQ,cAAAF,WAAA,wBAAAC,gBAAA,GAAVD,WAAA,CAAYL,IAAI,cAAAM,gBAAA,uBAAhBA,gBAAA,CAAkBE,MAAM,KAAIJ,CAAC,CAACK,OAAO;QAAC,CAAC,CAAC;MAAA,EAAC;IAC1G;IACAvB,IAAI,CAAC,EAAE,CAAC;EACV,CAAC;EAED,oBACEJ,OAAA;IAAA4B,QAAA,gBACE5B,OAAA;MAAK6B,SAAS,EAAC,UAAU;MAACC,EAAE,EAAC,SAAS;MAAAF,QAAA,GACnCvB,IAAI,CAAC0B,MAAM,KAAK,CAAC,iBAAI/B,OAAA;QAAKgC,KAAK,EAAE;UAACC,KAAK,EAAC,SAAS;UAAEC,OAAO,EAAC;QAAE,CAAE;QAAAN,QAAA,EAAC;MAAyC;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAC/GjC,IAAI,CAACkC,GAAG,CAAC,CAACC,CAAC,EAACC,CAAC,kBACZzC,OAAA;QAAa6B,SAAS,EAAE,UAAU,IAAIW,CAAC,CAAC5B,IAAI,KAAG,KAAK,GAAG,KAAK,GAAC,WAAW,CAAE;QAAAgB,QAAA,GACvEY,CAAC,CAAC5B,IAAI,KAAG,KAAK,iBAAIZ,OAAA;UAAK6B,SAAS,EAAC,YAAY;UAAAD,QAAA,EAAC;QAAC;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACtDtC,OAAA;UAAK6B,SAAS,EAAE,aAAa,IAAIW,CAAC,CAAC5B,IAAI,KAAG,KAAK,GAAG,KAAK,GAAC,WAAW,CAAE;UAAAgB,QAAA,gBACnE5B,OAAA;YAAA4B,QAAA,EAAMY,CAAC,CAAC3B;UAAI;YAAAsB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EAClBE,CAAC,CAACpB,OAAO,IAAIoB,CAAC,CAACpB,OAAO,CAACW,MAAM,GAAC,CAAC,iBAC9B/B,OAAA;YAAK6B,SAAS,EAAC,aAAa;YAAAD,QAAA,GAAC,UAE3B,EAACY,CAAC,CAACpB,OAAO,CAACmB,GAAG,CAAC,CAACG,CAAC,EAAEC,GAAG,kBAAI3C,OAAA;cAAa4C,IAAI,EAAC,GAAG;cAACC,OAAO,EAAEvB,CAAC,IAAEA,CAAC,CAACwB,cAAc,CAAC,CAAE;cAAAlB,QAAA,EAAEc,CAAC,CAACK;YAAM,GAAvDJ,GAAG;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAwD,CAAC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5F,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,EACLE,CAAC,CAAC5B,IAAI,KAAG,WAAW,iBAAIZ,OAAA;UAAK6B,SAAS,EAAC,YAAY;UAACG,KAAK,EAAE;YAACgB,UAAU,EAAC,SAAS;YAAEf,KAAK,EAAC;UAAM,CAAE;UAAAL,QAAA,EAAC;QAAC;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA,GAXjGG,CAAC;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAYN,CACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENtC,OAAA;MAAK6B,SAAS,EAAC,YAAY;MAAAD,QAAA,gBACzB5B,OAAA;QAAOiD,IAAI,EAAC,MAAM;QAACC,KAAK,EAAE/C,CAAE;QAACgD,QAAQ,EAAE7B,CAAC,IAAElB,IAAI,CAACkB,CAAC,CAAC8B,MAAM,CAACF,KAAK,CAAE;QAACG,WAAW,EAAC,mBAAmB;QAACC,SAAS,EAAGhC,CAAC,IAAIA,CAAC,CAACiC,GAAG,KAAK,OAAO,IAAI7C,IAAI,CAAC;MAAE;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChJtC,OAAA;QAAQ6C,OAAO,EAAEnC,IAAK;QAAAkB,QAAA,EAAC;MAAI;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpC,EAAA,CA5CuBD,UAAU;AAAAuD,EAAA,GAAVvD,UAAU;AAAA,IAAAuD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}